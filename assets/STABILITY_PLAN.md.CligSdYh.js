import{_ as a,c as t,o as i,ag as o}from"./chunks/framework._dqZt2de.js";const h=JSON.parse('{"title":"HelpmApp Stability & Maturity Plan","description":"","frontmatter":{},"headers":[],"relativePath":"STABILITY_PLAN.md","filePath":"STABILITY_PLAN.md"}'),r={name:"STABILITY_PLAN.md"};function s(l,e,n,d,c,p){return i(),t("div",null,[...e[0]||(e[0]=[o('<h1 id="helpmapp-stability-maturity-plan" tabindex="-1">HelpmApp Stability &amp; Maturity Plan <a class="header-anchor" href="#helpmapp-stability-maturity-plan" aria-label="Permalink to &quot;HelpmApp Stability &amp; Maturity Plan&quot;">â€‹</a></h1><p><em>Response to Jan 2026 FAANG Audit</em></p><p><strong>Status</strong>: ðŸš§ Planning <strong>Goal</strong>: Resolve &quot;Prisma Paradox&quot; (Raw SQL), improve test coverage, and enable Provider Self-Service.</p><h2 id="phase-24-data-layer-refactor-the-prisma-paradox" tabindex="-1">Phase 24: Data Layer Refactor (&quot;The Prisma Paradox&quot;) <a class="header-anchor" href="#phase-24-data-layer-refactor-the-prisma-paradox" aria-label="Permalink to &quot;Phase 24: Data Layer Refactor (&quot;The Prisma Paradox&quot;)&quot;">â€‹</a></h2><p><strong>Objective</strong>: Remove direct SQL usage (<code>$queryRaw</code>) to ensure type safety and schema consistency.</p><h3 id="strategy-materialized-views" tabindex="-1">Strategy: Materialized Views <a class="header-anchor" href="#strategy-materialized-views" aria-label="Permalink to &quot;Strategy: Materialized Views&quot;">â€‹</a></h3><p>Instead of complex raw queries in TypeScript, we will define SQL Views in the database and treat them as Prisma Models.</p><ol><li><strong>Identify Raw Queries</strong>: <ul><li><code>getProviderAnalytics</code>: Complex joins on Check-ins.</li><li><code>getHeatmapData</code>: Aggregation of activity logs.</li><li><code>getTopSearches</code>: Frequency count of search terms.</li></ul></li><li><strong>Implementation</strong>: <ul><li>Create SQL Migrations to define <code>VIEW</code> or <code>MATERIALIZED VIEW</code>.</li><li>Update <code>prisma/schema.prisma</code> to include these as distinct models (e.g., <code>model ProviderAnalyticsView { ... }</code>).</li><li>Refactor <code>database.ts</code> to use <code>prisma.providerAnalyticsView.findMany()</code>.</li></ul></li></ol><h2 id="phase-25-unit-testing-maintenance" tabindex="-1">Phase 25: Unit Testing &amp; Maintenance <a class="header-anchor" href="#phase-25-unit-testing-maintenance" aria-label="Permalink to &quot;Phase 25: Unit Testing &amp; Maintenance&quot;">â€‹</a></h2><p><strong>Objective</strong>: Shift left on testing. Reduce reliance on slow E2E tests for logic verification.</p><ol><li><strong>Install Vitest</strong>: Fast, lightweight test runner compatible with Vite/Next.js.</li><li><strong>Target Areas</strong>: <ul><li><code>src/lib/hours-utils.ts</code>: Verify opening/closing logic across timezones.</li><li><code>src/lib/service-parser.ts</code>: Verify KML/CSV parsing robustness.</li></ul></li><li><strong>CI Integration</strong>: Run unit tests on every PR (faster feedback loop).</li></ol><h2 id="phase-26-provider-onboarding-self-service" tabindex="-1">Phase 26: Provider Onboarding (Self-Service) <a class="header-anchor" href="#phase-26-provider-onboarding-self-service" aria-label="Permalink to &quot;Phase 26: Provider Onboarding (Self-Service)&quot;">â€‹</a></h2><p><strong>Objective</strong>: Solve the &quot;Empty Room&quot; problem by letting providers claim their own profiles.</p><ol><li><strong>Claim Flow</strong>: <ul><li>Frontend: &quot;Do you run this service?&quot; button on Service Details.</li><li>Backend: Create <code>ProviderRequest</code> attached to existing <code>Service</code>.</li><li>Admin: specific approval queue for Claims.</li></ul></li></ol><h2 id="roadmap" tabindex="-1">Roadmap <a class="header-anchor" href="#roadmap" aria-label="Permalink to &quot;Roadmap&quot;">â€‹</a></h2><ul><li>[ ] <strong>Phase 24</strong>: Database Views &amp; Prisma Refactor (Immediate)</li><li>[ ] <strong>Phase 25</strong>: Vitest Setup &amp; Critical Unit Tests</li><li>[ ] <strong>Phase 26</strong>: Provider Claim Flow</li></ul>',16)])])}const u=a(r,[["render",s]]);export{h as __pageData,u as default};
