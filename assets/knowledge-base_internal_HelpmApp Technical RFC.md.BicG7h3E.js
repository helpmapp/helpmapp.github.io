import{_ as s,c as a,o as e,ag as n}from"./chunks/framework._dqZt2de.js";const c=JSON.parse('{"title":"HelpmApp Technical RFC – Rebuild 2025","description":"","frontmatter":{},"headers":[],"relativePath":"knowledge-base/internal/HelpmApp Technical RFC.md","filePath":"knowledge-base/internal/HelpmApp Technical RFC.md"}'),t={name:"knowledge-base/internal/HelpmApp Technical RFC.md"};function l(r,i,h,p,d,k){return e(),a("div",null,[...i[0]||(i[0]=[n(`<h1 id="helpmapp-technical-rfc-–-rebuild-2025" tabindex="-1">HelpmApp Technical RFC – Rebuild 2025 <a class="header-anchor" href="#helpmapp-technical-rfc-–-rebuild-2025" aria-label="Permalink to &quot;HelpmApp Technical RFC – Rebuild 2025&quot;">​</a></h1><p><strong>Status:</strong> Draft<br><strong>Authors:</strong> Product &amp; Engineering<br><strong>Last Updated:</strong> 17 Nov 2025</p><hr><h2 id="_1-summary" tabindex="-1">1. Summary <a class="header-anchor" href="#_1-summary" aria-label="Permalink to &quot;1. Summary&quot;">​</a></h2><p>HelpmApp is rebuilding its platform from a clean slate after intentionally decommissioning the previous Vercel/Neon/Supabase deployment. This RFC codifies the architectural decisions, APIs, data contracts, and operational guardrails required to deliver the next-generation platform aligned with the business plan (Version 2.0, Nov 2025).</p><h2 id="_2-goals-non-goals" tabindex="-1">2. Goals &amp; Non-Goals <a class="header-anchor" href="#_2-goals-non-goals" aria-label="Permalink to &quot;2. Goals &amp; Non-Goals&quot;">​</a></h2><h3 id="goals" tabindex="-1">Goals <a class="header-anchor" href="#goals" aria-label="Permalink to &quot;Goals&quot;">​</a></h3><ol><li>Deliver a resilient, modular platform that supports low-bandwidth mobile users and rewards-driven engagement.</li><li>Provide automated ingestion and governance for service listings across London (and future cities).</li><li>Expose trustworthy analytics/dashboards for service providers and local authorities.</li><li>Ensure privacy, security, and compliance (GDPR, UK Data Protection) from day one.</li><li>Enable local development + CICD pipelines suitable for a small distributed team.</li></ol><h3 id="non-goals" tabindex="-1">Non-Goals <a class="header-anchor" href="#non-goals" aria-label="Permalink to &quot;Non-Goals&quot;">​</a></h3><ul><li>Funding mechanics, fundraising collateral (handled in business docs).</li><li>Legacy feature parity (only high-impact features documented below are in scope).</li><li>Non-UK deployments (internationalisation reserved for later RFCs).</li></ul><h2 id="_3-architecture-decisions" tabindex="-1">3. Architecture Decisions <a class="header-anchor" href="#_3-architecture-decisions" aria-label="Permalink to &quot;3. Architecture Decisions&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Topic</th><th>Decision</th><th>Rationale</th></tr></thead><tbody><tr><td>Client frameworks</td><td>Next.js 15 (App Router) for PWA, Expo (React Native) for future native apps</td><td>Shared React ecosystem, SSR/ISR support, offline capabilities</td></tr><tr><td>API layer</td><td>Next.js API routes with tRPC (or dedicated Fastify service if needed)</td><td>Co-located BFF for rapid iteration; type-safe contracts</td></tr><tr><td>Primary DB</td><td>Evaluating PlanetScale (MySQL) vs Supabase (Postgres) – preliminary leaning toward Supabase for PostGIS + Auth</td><td>Geospatial queries + built-in auth/storage; final decision due Week 2</td></tr><tr><td>Event streaming</td><td>direct ingestion to BigQuery (or Tinybird) via Segment-style event bus</td><td>Enables analytics/dashboards without stressing OLTP</td></tr><tr><td>Geospatial search</td><td>PostGIS or Typesense for radius queries</td><td>Accurate filtering for nearby services</td></tr><tr><td>Background jobs</td><td>BullMQ (Redis) managed via Upstash</td><td>Serverless-friendly, predictable</td></tr><tr><td>Hosting</td><td>Vercel for web/API, Fly.io/Render for workers (if required)</td><td>Simplicity + built-in preview environments</td></tr><tr><td>Secrets</td><td>Doppler or Vercel env mgmt</td><td>Central control, rotation</td></tr></tbody></table><h2 id="_4-api-surface-initial" tabindex="-1">4. API Surface (Initial) <a class="header-anchor" href="#_4-api-surface-initial" aria-label="Permalink to &quot;4. API Surface (Initial)&quot;">​</a></h2><h3 id="_4-1-public-app-apis" tabindex="-1">4.1 Public App APIs <a class="header-anchor" href="#_4-1-public-app-apis" aria-label="Permalink to &quot;4.1 Public App APIs&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Endpoint</th><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>/api/v1/auth/magic-link</code></td><td>POST</td><td>Request passwordless login email/SMS</td></tr><tr><td><code>/api/v1/services/search</code></td><td>GET</td><td>Nearby services (query params: lat, lng, radius, category, open_now)</td></tr><tr><td><code>/api/v1/checkins</code></td><td>POST</td><td>Submit check-in (requires GPS + service_id)</td></tr><tr><td><code>/api/v1/rewards</code></td><td>GET</td><td>Fetch available rewards + costs</td></tr><tr><td><code>/api/v1/rewards/redeem</code></td><td>POST</td><td>Redeem star balance for reward</td></tr></tbody></table><h3 id="_4-2-provider-portal-apis" tabindex="-1">4.2 Provider Portal APIs <a class="header-anchor" href="#_4-2-provider-portal-apis" aria-label="Permalink to &quot;4.2 Provider Portal APIs&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Endpoint</th><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>/api/v1/providers/session</code></td><td>POST</td><td>Provider login (magic link or OAuth)</td></tr><tr><td><code>/api/v1/providers/services</code></td><td>GET/POST/PATCH</td><td>Manage listings</td></tr><tr><td><code>/api/v1/providers/analytics</code></td><td>GET</td><td>Aggregated check-ins, demographics</td></tr><tr><td><code>/api/v1/providers/announcements</code></td><td>POST</td><td>Push updates to users (service changes)</td></tr></tbody></table><h3 id="_4-3-internal-admin-apis" tabindex="-1">4.3 Internal/Admin APIs <a class="header-anchor" href="#_4-3-internal-admin-apis" aria-label="Permalink to &quot;4.3 Internal/Admin APIs&quot;">​</a></h3><ul><li>Service import hooks (<code>/internal/import/london</code>).</li><li>Queue management endpoints (protected, minimal surface).</li><li>Rewards ledger admin (approve redemptions, adjust balances).</li></ul><h2 id="_5-data-schemas-draft" tabindex="-1">5. Data Schemas (Draft) <a class="header-anchor" href="#_5-data-schemas-draft" aria-label="Permalink to &quot;5. Data Schemas (Draft)&quot;">​</a></h2><p>Using Prisma-style notation for clarity.</p><div class="language-prisma vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">prisma</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">model</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id             </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   @id</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cuid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  createdAt      </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DateTime</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  emailHash      </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // hashed for privacy</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  phoneHash      </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  consentFlags   </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  starsBalance   </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  checkIns       </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CheckIn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  redemptions    </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Redemption</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">model</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id          </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   @id</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cuid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name        </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  category    </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  description </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  location    </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // PostGIS point</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  address     </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  hours       </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  capacity    </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  providerId  </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  status      </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // active, paused, archived</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  updatedAt   </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DateTime</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @updatedAt</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">model</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Provider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id            </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   @id</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cuid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name          </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  contact       </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  borough       </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tier          </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // free, premium</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  services      </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Service</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  subscriptions </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Subscription</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">model</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CheckIn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id          </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   @id</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cuid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  userId      </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  serviceId   </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  createdAt   </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DateTime</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  method      </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // gps / manual</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  starsAwarded </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  metadata    </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">model</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Reward</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id         </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   @id</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cuid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  type       </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  starCost   </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  inventory  </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  sponsorId  </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  status     </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">model</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Redemption</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id         </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   @id</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cuid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  userId     </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  rewardId   </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  status     </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // pending, fulfilled, cancelled</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  metadata   </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  createdAt  </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DateTime</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="_6-service-data-pipeline" tabindex="-1">6. Service Data Pipeline <a class="header-anchor" href="#_6-service-data-pipeline" aria-label="Permalink to &quot;6. Service Data Pipeline&quot;">​</a></h2><h3 id="steps" tabindex="-1">Steps <a class="header-anchor" href="#steps" aria-label="Permalink to &quot;Steps&quot;">​</a></h3><ol><li>Fetch raw data (CSV/KML/API) into staging bucket.</li><li>Normalize using Python/TypeScript ETL (run via queue).</li><li>Validate (geo bounds, duplicate detection, required fields).</li><li>Persist to DB with <code>Service</code> + <code>Provider</code> upserts.</li><li>Notify providers of pending changes via portal.</li><li>Emit events for analytics (ingest_version, coverage stats).</li></ol><h3 id="monitoring" tabindex="-1">Monitoring <a class="header-anchor" href="#monitoring" aria-label="Permalink to &quot;Monitoring&quot;">​</a></h3><ul><li>Job metrics (duration, failures) → Grafana/Looker dashboards.</li><li>Alert when &gt;5% of services stale (&gt;30 days since update).</li></ul><h2 id="_7-security-privacy" tabindex="-1">7. Security &amp; Privacy <a class="header-anchor" href="#_7-security-privacy" aria-label="Permalink to &quot;7. Security &amp; Privacy&quot;">​</a></h2><ul><li>Anonymous user IDs stored by default; PII hashed.</li><li>Row-Level Security for provider queries (only their services/check-ins).</li><li>Encryption at rest (Supabase/PlanetScale). TLS in transit.</li><li>Incident response runbook + DPIA review (quarterly).</li><li>Age and safeguarding flows: flagged services require manual approval; harmful content filters on comments (if reintroduced).</li></ul><h2 id="_8-deployment-ops" tabindex="-1">8. Deployment &amp; Ops <a class="header-anchor" href="#_8-deployment-ops" aria-label="Permalink to &quot;8. Deployment &amp; Ops&quot;">​</a></h2><ul><li>Monorepo with Turborepo; packages for <code>web</code>, <code>api</code>, <code>worker</code>, <code>shared</code>.</li><li>GitHub Actions pipeline: lint → test → build → preview deploy; gating for main branch.</li><li>Observability stack: Sentry (errors), Logtail (logs), Grafana Cloud (metrics), UptimeRobot (synthetics).</li><li>On-call rotation (initially founders) with PagerDuty-lite (Opsgenie or Slack alerts).</li></ul><h2 id="_9-open-questions" tabindex="-1">9. Open Questions <a class="header-anchor" href="#_9-open-questions" aria-label="Permalink to &quot;9. Open Questions&quot;">​</a></h2><ol><li>Final DB/Auth decision (PlanetScale vs Supabase + Clerk vs Supabase Auth).</li><li>Rewards accounting – in-house vs third-party (Tremendous, etc.).</li><li>Map provider licensing (Mapbox vs Google) relative to sponsor relationships.</li><li>Push notification provider (Expo vs OneSignal) and consent flows.</li></ol><h2 id="_10-timeline-dependencies" tabindex="-1">10. Timeline &amp; Dependencies <a class="header-anchor" href="#_10-timeline-dependencies" aria-label="Permalink to &quot;10. Timeline &amp; Dependencies&quot;">​</a></h2><ul><li>Week 1-2: Finalize open decisions, create infra IaC.</li><li>Week 3-4: Implement service ingest + MVP API.</li><li>Week 5-6: Ship rewards ledger + provider portal alpha.</li><li>Week 7-8: Instrument dashboards + privacy tooling.</li></ul><p>Dependencies: updated service datasets, sponsor LOIs for rewards testing, budget approvals for SaaS.</p><h2 id="_11-approvals" tabindex="-1">11. Approvals <a class="header-anchor" href="#_11-approvals" aria-label="Permalink to &quot;11. Approvals&quot;">​</a></h2><ul><li>Product Lead: ___</li><li>CTO: ___</li><li>Impact/Privacy: ___</li></ul><hr><p><em>Comments welcome via PR or <a href="mailto:engineering@helpmapp.org" target="_blank" rel="noreferrer">engineering@helpmapp.org</a>.</em></p>`,40)])])}const E=s(t,[["render",l]]);export{c as __pageData,E as default};
